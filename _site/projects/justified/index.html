<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>
    lai.victor &raquo; Justified Lines in C++
  </title>
  
  <!-- Site Author -->
  <meta name="author" content="Victor Lai" />
  
  <!-- Site Description -->
  <meta name="description" content="" />

  <!-- Site Viewport -->
  <meta name="viewport" content="user-scalable=no,width=device-width" />

  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Blog CSS -->
  <link href="http://fonts.googleapis.com/css?family=Droid+Sans|Yanone+Kaffeesatz" media="projection, screen" rel="stylesheet" type="text/css" />
  <link href="/css/reset.css" media="projection,screen" rel="stylesheet" type="text/css" /> 

  <!-- Base CSS -->
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/footer.css">
  <link rel="stylesheet" href="/css/skeleton.css">
  <link rel="stylesheet" href="/css/layout.css">

  <!-- FontAwesome -->
  <link rel="stylesheet" href="/css/font-awesome.css">

  <!-- Syntax Highlighting CSS -->
  <link href="/css/syntax.css" rel="stylesheet" type="text/css" />

  <!-- Fav Icon -->
  <link href="/images/favicon.ico" rel="shortcut icon" /> 

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33478809-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</head>

<body>

    <div id="header">
	<div class="container">
		<br />
		<div class="eight columns">
			<div id="name"> 
				<h1>
					<a href="/">
						<span id="last">LAI</span>.<span id="first">VICTOR</span>
					</a>
				</h1>
			</div>
		</div>

		<div class="eight columns center">
			<div class="icon" style="font-size: 48px;">
				<a target="_blank" href="http://www.twitter.com/dblisse">
					<i class="icon-twitter-sign"></i>
				</a>
				<a target="_blank" href="http://ca.linkedin.com/in/laivictor">
					<i class="icon-linkedin-sign"></i>
				</a>
				<a target="_blank" href="http://www.github.com/Blisse">
					<i class="icon-github-sign"></i>
				</a>
				<a href="mailto:lai.victor.vl@gmail.com">
					<i class="icon-envelope"></i>
				</a>
			</div>
		</div>

		<div class="sixteen columns">
			<div id="nav" class="center">
				<ul class="nav">
					<li class="currentpage">
						<a href="/">Home</a>
					</li>
					<li>
						<a href="/archive/">Archive</a>
					</li>
					<li>
						<a href="/projects/">Projects</a>
					</li>
					<li>
						<a href="/about/">About</a>
					</li>
				</ul>
			<br />
			</div>
			<br />
		</div>
	</div>
</div>
    
<br />
	<div class="container">

	<div class="sixteen columns">
	  <article class="post">

		<h3><a href="/projects/justified/index.html" title="Permanent link to this post">Justified Lines in C++</a></h3>

		<p>
  Pretty direct implementation after my first 2 weeks of C++.
  Not my best code, but in all my Googling, I haven't found anything that does this as well.
</p>

<p>
  Justifies a file called filenameIn, writing the output to filenameOut. Must take in the 
  maximum number of characters of the page. Goes through each line, adding spaces until the
  the maximum number of characters is reached for that line, then writes to the file and continues.
</p>

<div class="highlight"><pre><code class="c"><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;string&gt;</span>
<span class="cp">#include &lt;fstream&gt;</span>
<span class="cp">#include &lt;istream&gt;</span>
<span class="cp">#include &lt;cstdlib&gt;</span>

<span class="n">class</span> <span class="n">LineTools</span> <span class="p">{</span>

	<span class="nl">public:</span>

	<span class="kt">void</span> <span class="n">justifyLines</span><span class="p">(</span><span class="n">string</span> <span class="n">filenameIn</span><span class="p">,</span> <span class="n">string</span> <span class="n">filenameOut</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_len</span><span class="p">)</span>
	<span class="p">{</span>

		<span class="n">ifstream</span> <span class="n">infile</span><span class="p">;</span>
		<span class="n">infile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filenameIn</span><span class="p">.</span><span class="n">c_str</span><span class="p">()</span> <span class="p">);</span>

		<span class="n">ofstream</span> <span class="n">outfile</span><span class="p">;</span>
		<span class="n">outfile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filenameOut</span><span class="p">.</span><span class="n">c_str</span><span class="p">()</span> <span class="p">);</span>

		<span class="n">string</span> <span class="n">string_in</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">line_len</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>

		<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="kt">int</span> <span class="n">oneword</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

		<span class="k">while</span> <span class="p">(</span> <span class="n">getline</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">string_in</span><span class="p">)</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="n">oneword</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="n">line_len</span> <span class="o">=</span> <span class="n">string_in</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
			<span class="n">offset</span> <span class="o">=</span> <span class="n">max_len</span> <span class="o">-</span> <span class="n">line_len</span><span class="p">;</span>

			<span class="k">for</span> <span class="p">(</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">line_len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="n">string_in</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="p">)</span>
				<span class="p">{</span>
					<span class="n">oneword</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">offset</span> <span class="p">)</span>
			<span class="p">{</span>
				<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">string_in</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="c1">// string_len &lt; max_len</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">oneword</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">string_in</span><span class="p">;</span>
					<span class="k">while</span> <span class="p">(</span><span class="n">offset</span><span class="p">)</span>
					<span class="p">{</span>
						<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
						<span class="n">offset</span><span class="o">--</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">else</span>
				<span class="p">{</span>
					<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
					<span class="k">while</span> <span class="p">(</span> <span class="n">offset</span> <span class="p">)</span>
					<span class="p">{</span>
						<span class="k">if</span> <span class="p">(</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">line_len</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span>
						<span class="p">{</span>
							<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
						<span class="p">}</span>

						<span class="k">if</span> <span class="p">(</span> <span class="n">string_in</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="p">)</span>
						<span class="p">{</span>
							<span class="n">string_in</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">);</span>
							<span class="n">k</span><span class="o">++</span><span class="p">;</span>
							<span class="k">while</span> <span class="p">(</span> <span class="n">string_in</span><span class="p">[</span><span class="n">k</span><span class="o">++</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
							<span class="p">{</span>
							<span class="p">}</span>
							<span class="n">line_len</span><span class="o">++</span><span class="p">;</span>
							<span class="n">offset</span><span class="o">--</span><span class="p">;</span>
						<span class="p">}</span>
						<span class="n">k</span><span class="o">++</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
					<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">string_in</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
				<span class="p">}</span>

			<span class="p">}</span>

		<span class="p">}</span>

		<span class="n">infile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
		<span class="n">outfile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
	<span class="p">}</span>

<span class="p">}</span>
</code></pre>
</div>

<p>
  I'm welcome to any suggestions on how to improve this, because there's a lot that can be improved.
  Sadly, this only works for monospaced fonts. I think I would need to analyze the default font style
  before I can implement this 100%.
</p>

<p>
  Depending on how you want to use this, it's probably a good idea to create a method to get the maximum
  number of characters per line you're aiming for.
</p>

	  </article>
	</div>

</div>

    <div class="container">
	<div class="sixteen columns">
	<footer id="footer">
		<div class="center">
			<p>
				All content copyright &copy; <a href="/about">Victor Lai</a>. Written in almost <a href="http://www.laivictor.com/archive/2012/08/22/index.html">valid</a>
				<a href="http://html5.validator.nu/" title="valid HTML5" rel="external" target="_blank">HTML5</a> and 
				not even close to valid <a href="http://jigsaw.w3.org/css-validator/" title="valid CSS3" rel="external" target="_blank">CSS3</a>.  ^^
			</p>
			<p>
				Powered by <a href="http://github.com/mojombo/jekyll" title="The Jekyll (static site generator) code repository"
				rel="external" target="_blank">Jekyll</a> and hosted on <a href="http://pages.github.com/">GitHub Pages</a>.
			</p>
		</div>
	</footer>
	</div>
</div>

	<script type="text/javascript" src="/js/currentselection.js"></script>
<script type="text/javascript">

$(document).ready(
	function()
	{
		var str=location.href;
		$(".nav li a").each(
			function() {
				if (str.indexOf(this.href) > -1) 
				{
					$("li.currentpage").removeClass("currentpage");
					$(this).parent().addClass("currentpage");
				}
			}
		);
	}
)

</script>
	<script type="text/javascript" src="/js/resizebar.js"></script>
<script type="text/javascript">
$(document).ready(
	function()
	{
		$(window).resize(
			function()
			{
				$(' #name ').each(
					function() 
					{
						if ( $(window).width() >= 960 )
						{
							$(' #header h1 a ').css('font-size', '84px');
							$(function() {
								changeWidth(400);
							 
								function changeWidth(menuWidth){
									var menuItems = $('#header #nav ul li').size();
									var itemWidth = (menuWidth/menuItems)-2;
							 
									$('#nav').css({'width': menuWidth +'px'});
									$('#nav a').css({'width': itemWidth +'px'});
								}
							});
						}
						else if ( $(window).width() >= 768 ) 
						{
							$(' #header h1 a ').css('font-size', '75px');
							$(function() {
								changeWidth(370);
							 
								function changeWidth(menuWidth){
									var menuItems = $('#header #nav ul li').size();
									var itemWidth = (menuWidth/menuItems)-2;
							 
									$('#nav').css({'width': menuWidth +'px'});
									$('#nav a').css({'width': itemWidth +'px'});
								}
							});
						}
						else if ( $(window).width() >= 480 ) 
						{
							$(' #header h1 a ').css('font-size', '75px');
							$(function() {
								changeWidth(350);
							 
								function changeWidth(menuWidth){
									var menuItems = $('#header #nav ul li').size();
									var itemWidth = (menuWidth/menuItems)-2;
							 
									$('#nav').css({'width': menuWidth +'px'});
									$('#nav a').css({'width': itemWidth +'px'});
								}
							});
						}
						else
						{
							$(' #header h1 a ').css('font-size', '53px');
							$(function() {
								changeWidth(310);
							 
								function changeWidth(menuWidth){
									var menuItems = $('#header #nav ul li').size();
									var itemWidth = (menuWidth/menuItems)-2;
							 
									$('#nav').css({'width': menuWidth +'px'});
									$('#nav a').css({'width': itemWidth +'px'});
								}
							});
						}
					}
				)
			}
		);
		if ( $(window).width() >= 960 )
		{
			$(' #header h1 a ').css('font-size', '84px');
			$(function() {
				changeWidth(400);
			 
				function changeWidth(menuWidth){
					var menuItems = $('#header #nav ul li').size();
					var itemWidth = (menuWidth/menuItems)-2;
			 
					$('#nav').css({'width': menuWidth +'px'});
					$('#nav a').css({'width': itemWidth +'px'});
				}
			});
		}
		else if ( $(window).width() >= 768 ) 
		{
			$(' #header h1 a ').css('font-size', '75px');
			$(function() {
				changeWidth(370);
			 
				function changeWidth(menuWidth){
					var menuItems = $('#header #nav ul li').size();
					var itemWidth = (menuWidth/menuItems)-2;
			 
					$('#nav').css({'width': menuWidth +'px'});
					$('#nav a').css({'width': itemWidth +'px'});
				}
			});
		}
		else if ( $(window).width() >= 480 ) 
		{
			$(' #header h1 a ').css('font-size', '75px');
			$(function() {
				changeWidth(350);
			 
				function changeWidth(menuWidth){
					var menuItems = $('#header #nav ul li').size();
					var itemWidth = (menuWidth/menuItems)-2;
			 
					$('#nav').css({'width': menuWidth +'px'});
					$('#nav a').css({'width': itemWidth +'px'});
				}
			});
		}
		else
		{
			$(' #header h1 a ').css('font-size', '53px');
			$(function() {
				changeWidth(310);
			 
				function changeWidth(menuWidth){
					var menuItems = $('#header #nav ul li').size();
					var itemWidth = (menuWidth/menuItems)-2;
			 
					$('#nav').css({'width': menuWidth +'px'});
					$('#nav a').css({'width': itemWidth +'px'});
				}
			});
		}
	}
);
</script>

</body>

</html>
