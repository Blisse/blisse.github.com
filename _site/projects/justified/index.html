<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>
    lai.victor &raquo; Justifying Lines in C++
  </title>
  
    <!-- Site Author -->
  <meta name="author" content="Victor Lai" />
  
  <!-- Site Description -->
  <meta name="description" content="" />

  <!-- Site Viewport -->
  <meta name="viewport" content="user-scalable=no,width=device-width" />

  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Blog CSS -->
  <link href="/css/reset.css" media="projection,screen" rel="stylesheet" type="text/css" /> 

  <!-- Blog Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Tangerine' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow&amp;v1' rel='stylesheet' type='text/css' />
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro|Source+Code+Pro|Inconsolata' rel='stylesheet' type='text/css'>

  <!-- Base CSS -->
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/header/header.css">
  <link rel="stylesheet" href="/css/footer/footer.css">
  <link rel="stylesheet" href="/css/skeleton/skeleton.css">
  <link rel="stylesheet" href="/css/layout.css">

  <!-- FontAwesome -->
  <link rel="stylesheet" href="/css/font-awesome/font-awesome.css">

  <!-- Syntax Highlighting CSS -->
  <link href="/css/syntax.css" rel="stylesheet" type="text/css" />

  <!-- Personal - Tiles -->
  <link rel="stylesheet" href="/css/tiles/tiles.css">

  <!-- Fav Icon -->
  <link href="/images/favicon.ico" rel="shortcut icon" /> 

  <!-- Google Analytics -->
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33478809-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>  

</head>

<body>

<div id="header">
	<div class="container">
		<br />
		<div class="eight columns">
			<div id="name"> 
				<h1>
					<a href="/">
						<span id="last">LAI</span>.<span id="first">VICTOR</span>
					</a>
				</h1>
			</div>
		</div>

		<div class="eight columns center">
			<div class="icon" style="font-size: 48px;">
				<a target="_blank" href="http://www.twitter.com/laivictorvl ">
					<i class="icon-twitter-sign"></i>
				</a>
				<a target="_blank" href="http://ca.linkedin.com/in/laivictor">
					<i class="icon-linkedin-sign"></i>
				</a>
				<a target="_blank" href="http://www.github.com/blisse">
					<i class="icon-github-sign"></i>
				</a>
				<a href="mailto:lai.victor.vl@gmail.com">
					<i class="icon-envelope"></i>
				</a>
			</div>
		</div>

		<div class="sixteen columns">
			<div id="mainmenu" class="center">
				<ul>
					<li class="">
						<a href="/">Home</a>
					</li>
					<li class="">
						<a href="/blog/">Blog</a>
					</li>
					<li class="currentpage">
						<a href="/projects/">Projects</a>
					</li>
					<li class="">
						<a href="/about/">About</a>
					</li>
				</ul>
			</div>

			
			<div id="submenu" class="center">
				<ul>
					<li class="currentpage">
						<a href="/projects/">Listing</a>
					</li>
				</ul>
			</div>
			
			<br />
		</div>
	</div>
</div>
<br />
<div class="container">

	<div class="sixteen columns">
	  <article class="post">

		<h2><a href="/projects/justified/index.html" title="Permanent link to this post">Justifying Lines in C++</a></h2>

		<p>
  Pretty direct implementation after my first 2 weeks of C++.
  Not my best code, but in all my Googling, I haven't found anything that does this. 
  Only works with monospaced fonts, of course.
</p>

<p>
  The code is pretty self evident. Takes in an input file, output file and required length of 
  all the lines (must be greater than the maximum line length).
</p>

<div class="highlight"><pre><code class="c"><span class="cp">#include &lt;iostream&gt;</span>
<span class="cp">#include &lt;string&gt;</span>
<span class="cp">#include &lt;fstream&gt;</span>
<span class="cp">#include &lt;istream&gt;</span>
<span class="cp">#include &lt;cstdlib&gt;</span>
<span class="cp">#include &lt;string&gt;</span>

<span class="n">using</span> <span class="n">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="n">class</span> <span class="n">LineTools</span> <span class="p">{</span>
<span class="nl">public:</span>
	<span class="kt">void</span> <span class="n">justifyLines</span><span class="p">(</span><span class="n">string</span> <span class="n">filenameIn</span><span class="p">,</span> <span class="n">string</span> <span class="n">filenameOut</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max_len</span><span class="p">)</span>
	<span class="p">{</span>
	<span class="n">ifstream</span> <span class="n">infile</span><span class="p">;</span>
	<span class="n">infile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filenameIn</span><span class="p">.</span><span class="n">c_str</span><span class="p">()</span> <span class="p">);</span>
	<span class="n">ofstream</span> <span class="n">outfile</span><span class="p">;</span>
	<span class="n">outfile</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="n">filenameOut</span><span class="p">.</span><span class="n">c_str</span><span class="p">()</span> <span class="p">);</span>
	<span class="n">string</span> <span class="n">string_in</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">line_len</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">offset</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">oneword</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span> <span class="n">getline</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">string_in</span><span class="p">)</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="n">oneword</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
		<span class="n">line_len</span> <span class="o">=</span> <span class="n">string_in</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
		<span class="n">offset</span> <span class="o">=</span> <span class="n">max_len</span> <span class="o">-</span> <span class="n">line_len</span><span class="p">;</span>
		<span class="k">for</span> <span class="p">(</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">line_len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="n">string_in</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="p">)</span>
			<span class="p">{</span>
				<span class="n">oneword</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">offset</span> <span class="p">)</span>
		<span class="p">{</span>
			<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">string_in</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="c1">// string_len &lt; max_len</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">oneword</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">string_in</span><span class="p">;</span>
				<span class="k">while</span> <span class="p">(</span><span class="n">offset</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; &quot;</span><span class="p">;</span>
					<span class="n">offset</span><span class="o">--</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span>
			<span class="p">{</span>
				<span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
				<span class="k">while</span> <span class="p">(</span> <span class="n">offset</span> <span class="p">)</span>
				<span class="p">{</span>
					<span class="k">if</span> <span class="p">(</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">line_len</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span>
					<span class="p">{</span>
						<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
					<span class="p">}</span>

					<span class="k">if</span> <span class="p">(</span> <span class="n">string_in</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span> <span class="p">)</span>
					<span class="p">{</span>
						<span class="n">string_in</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="s">&quot; &quot;</span><span class="p">);</span>
						<span class="n">k</span><span class="o">++</span><span class="p">;</span>
						<span class="k">while</span> <span class="p">(</span> <span class="n">string_in</span><span class="p">[</span><span class="n">k</span><span class="o">++</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39; &#39;</span><span class="p">)</span>
						<span class="p">{</span>
						<span class="p">}</span>
						<span class="n">line_len</span><span class="o">++</span><span class="p">;</span>
						<span class="n">offset</span><span class="o">--</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="n">k</span><span class="o">++</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
				<span class="n">outfile</span> <span class="o">&lt;&lt;</span> <span class="n">string_in</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">infile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
	<span class="n">outfile</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[]</span> <span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span> <span class="n">argc</span> <span class="o">!=</span> <span class="mi">4</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="n">LineTools</span> <span class="n">linetool</span><span class="p">;</span>
	<span class="n">linetool</span><span class="p">.</span><span class="n">justifyLines</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]));</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>
  Let's give it some input.
</p>

<p>
<div class="highlight"><pre><code class="console"><span class="go">abcdefghijklmnopqrstuvwxyz</span>
<span class="go">a ef ijkl op svwxyz</span>
<span class="go">a cd nopqr z</span>
</code></pre>
</div>
<p>

<p>
  And here's the output for "ccfile.o filein.txt fileout.txt 26".
</p>

</p>
<div class="highlight"><pre><code class="console"><span class="go">abcdefghijklmnopqrstuvwxyz</span>
<span class="go">a   ef   ijkl   op  svwxyz</span>
<span class="go">a      cd      nopqr     z</span>
</code></pre>
</div>
</p>

<p>
  The output for "file.o filein.txt fileout.txt 27" is a bit different.
</p>

<p>
<div class="highlight"><pre><code class="console"><span class="go">abcdefghijklmnopqrstuvwxyz </span>
<span class="go">a   ef   ijkl   op   svwxyz</span>
<span class="go">a      cd      nopqr      z</span>
</code></pre>
</div>
</p>

<p>
  I'm welcome to any suggestions on how to improve this, because there's a lot that can be improved.
  Sadly, this only works for monospaced fonts. I think I would need to analyze the default font style
  before I can implement this 100% for all font types. I will look into that for the future.
</p>

<p>
  Depending on how it'll be used. it's probably a good idea to create a method to get the maximum
  number of characters per line.
</p>

	  </article>
	</div>

</div>

<div class="container">
	<div class="sixteen columns">
	<footer id="footer">
		<div class="center">
			<p>
				All content copyright &copy; <a href="/about">Victor Lai</a>. Written in almost <a href="http://www.laivictor.com/archive/2012/08/22/index.html">valid</a>
				<a href="http://html5.validator.nu/" title="valid HTML5" rel="external" target="_blank">HTML5</a> and 
				not even close to valid <a href="http://jigsaw.w3.org/css-validator/" title="valid CSS3" rel="external" target="_blank">CSS3</a>.  ^^
			</p>
			<p>
				Powered by <a href="http://github.com/mojombo/jekyll" title="The Jekyll (static site generator) code repository"
				rel="external" target="_blank">Jekyll</a> and hosted on <a href="http://pages.github.com/">GitHub Pages</a>.
			</p>
		</div>
	</footer>
	</div>
</div>
<script type="text/javascript" src="/js/resizebar.js"></script>
<script type="text/javascript">
function changeMainWidth(menuWidth){
	var menuItems = $('#header #mainmenu ul li').size();
	var itemWidth = (menuWidth/menuItems);

	$('#mainmenu').css({'width': menuWidth +'px'});
	$('#mainmenu a').css({'width': itemWidth +'px'});
}

var len_mainmenu;
if(document.getElementById('mainmenu')){
	len_mainmenu = document.getElementById('mainmenu').getElementsByTagName('li').length;
}
$(document).ready(
	function()
	{
		$(window).resize(
			function()
			{
				if ( $(window).width() - 30 >= 960 )
				{
					$(' #header h1 a ').css('font-size', '84px');
					$(function() {
						changeMainWidth(len_mainmenu * 105);
					});
				}
				else if ( $(window).width() - 30 >= 768 ) 
				{
					$(' #header h1 a ').css('font-size', '75px');
					$(function() {
						changeMainWidth(len_mainmenu * 105);
					});
				}
				else if ( $(window).width() - 30 >= 480 ) 
				{
					$(' #header h1 a ').css('font-size', '75px');
					$(function() {
						changeMainWidth(len_mainmenu * 105);
					});
				}
				else
				{
					$(' #header h1 a ').css('font-size', '53px');
					$(function() {
						changeMainWidth(len_mainmenu * 75);
					});
				}
			}
		);
		if ( $(window).width() - 30 >= 960 )
		{
			$(' #header h1 a ').css('font-size', '84px');
			$(function() {
				changeMainWidth(len_mainmenu * 105);
			});
		}
		else if ( $(window).width() - 30 >= 768 ) 
		{
			$(' #header h1 a ').css('font-size', '75px');
			$(function() {
				changeMainWidth(len_mainmenu * 105);
			});
		}
		else if ( $(window).width() - 30 >= 480 ) 
		{
			$(' #header h1 a ').css('font-size', '75px');
			$(function() {
				changeMainWidth(len_mainmenu * 105);
			});
		}
		else
		{
			$(' #header h1 a ').css('font-size', '53px');
			$(function() {
				changeMainWidth(len_mainmenu * 75);
			});
		}
	}
);
</script>
<script type="text/javascript" src="/js/resizebar.js"></script>
<script type="text/javascript">
function changeSubWidth(menuWidth){
	var menuItems = $('#header #submenu ul li').size();
	var itemWidth = (menuWidth/menuItems);

	$('#submenu').css({'width': menuWidth +'px'});
	$('#submenu a').css({'width': itemWidth +'px'});
}
var len_submenu;
if(document.getElementById('submenu')){
	len_submenu = document.getElementById('submenu').getElementsByTagName('li').length;
}
$(document).ready(
	function()
	{
		$(window).resize(
			function()
			{
				if ( $(window).width() - 30 >= 960 )
				{
					$(function() {
						changeSubWidth(len_submenu * 105);
					});
				}
				else if ( $(window).width() - 30 >= 768 ) 
				{
					$(function() {
						changeSubWidth(len_submenu * 105);
					});
				}
				else if ( $(window).width() - 30 >= 480 ) 
				{
					$(function() {
						changeSubWidth(len_submenu * 105);
					});
				}
				else
				{
					$(function() {
						changeSubWidth(len_submenu * 75);
					});
				}
			}
		);
		if ( $(window).width() - 30 >= 960 )
		{
			$(function() {
				changeSubWidth(len_submenu * 105);
			});
		}
		else if ( $(window).width() - 30 >= 768 ) 
		{
			$(function() {
				changeSubWidth(len_submenu * 105);
			});
		}
		else if ( $(window).width() - 30 >= 480 ) 
		{
			$(function() {
				changeSubWidth(len_submenu * 105);
			});
		}
		else
		{
			$(function() {
				changeSubWidth(len_submenu * 75);
			});
		}
	}
);
</script>
</body>

</html>
