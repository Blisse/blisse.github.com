/*
    jQuery Content Player v0.1
    Copyright (c) 2011 Terry Schmidt
    This plugin is available for use in all personal or commercial projects
    under the DBAD license - http://dbad-license.org/license
*/
/*
    ==========================================================================
    jQuery Plugin: Content Player
    ==========================================================================
    
    The idea behind this plugin is to allow the developer to create a "player"
    where the tracks are HTML elements. This could be text, images, movies,
    whatever; we don't care. The main thing is to allow the user to create a
    slideshow regardless of markup. Well...almost.
    
    --------------------------------------------------------------------------
    Requirements
    --------------------------------------------------------------------------
    
    This plugin requires the jquery.easing plugin. The most common ways of
    including this is either by referencing the easing plugin itself or
    including the jquery-ui library.
    
    There is also one HTML requirement and that is you wrap your "slides" in 
    some block container. For example:
    
      <div class="slide-wrapper">
        <section>
          ...
        </section>
        <section>
          ...
        </section>
      </div>
    
    In this example, each section will be treated as a "slide". The <div />
    is the wrapper that will tell this plugin which children belong to the
    slideshow.
*/
var slideshowCount=1;$.fn.content_player=function(a){var b=$.extend({autoPlay:!1,autoPlayInterval:7e3,autoPlayStopWhenClicked:!0,autoPlayRestartAfterInterval:15e3,locationHashSupport:!0,dynamicArrows:!0,dynamicArrowsPrevText:"&#171; prev",dynamicArrowsNextText:"next &#187;",dynamicTabs:!0,dynamicTabsPosition:"top",firstSlideToLoad:1,tabTitleSelector:".title",slideEaseDuration:1e3,slideEaseFunction:"jswing"},a);return this.each(function(){function u(a){if(typeof a=="number")return a;var b;b=parseInt(a.match(/\d+/)[0]);return b}function t(a){b.dynamicTabs&&l.find(".current-tab").removeClass("current-tab").end().find("[href=#"+a+"]").addClass("current-tab")}function s(){clearInterval(c.slideTimer),clearTimeout(c.slideTimeout)}function r(){clearInterval(c.slideTimer),clearTimeout(c.slideTimeout),c.slideTimeout=setTimeout(o,b.autoPlayRestartAfterInterval)}function q(c){a=typeof c!="undefined"?c:a,a--;var e,g;a>0?e=d.eq(a-1):(e=d.eq(k-1),a=k),g=-(f*e.index()),m.animate({marginLeft:g,height:e.height()},b.slideEaseDuration,b.slideEaseFunction),t(a-1)}function p(c){a=typeof c!="undefined"?c:a;var e,g;a<=k-1?e=d.eq(a):(e=d.eq(0),a=0),g=-(f*e.index()),m.animate({marginLeft:g,height:e.height()},b.slideEaseDuration,b.slideEaseFunction),t(a),a++}function o(){c.slideTimer=setInterval(p,b.autoPlayInterval)}function n(){e.css({overflow:"hidden"}).find(":first").css({width:g,position:"relative",overflow:"hidden"}).addClass("clearfix"),d.wrapAll(e).css({width:f,"float":"left"}),e=c.find(":first"),m=e.find(":first");if(b.dynamicTabs){l=$('<div class="content-player-tabs-container clearfix"><ol /></div>'),d.each(function(a){var c,d,e;c=$(this),d=this,c.find(b.tabTitleSelector).length>0?e=c.find(b.tabTitleSelector).text():e="Slide "+(a+1),l.find(":first").append('<li><a href="#'+a+'">'+e+"</a></li>")});switch(b.dynamicTabsPosition){case"bottom":c.after(l);break;default:c.before(l)}}b.dynamicArrows&&(i=$('<div class="arrow-container next"><a href="#" class="next arrow">'+b.dynamicArrowsNextText+"</a></div>"),j=i.clone().removeClass("next").addClass("prev").find(":first").removeClass("next").addClass("prev").html(b.dynamicArrowsPrevText).end(),c.prepend(i).prepend(j)),b.dynamicTabs&&l.find("a").bind("click",function(a){a.preventDefault(),b.autoPlayStopWhenClicked?s():r(),p(u(this.hash))}),b.dynamicArrows&&(i.find("a").bind("click",function(a){a.preventDefault(),b.autoPlayStopWhenClicked?s():r(),p()}),j.find("a").bind("click",function(a){a.preventDefault(),b.autoPlayStopWhenClicked?s():r(),q()})),b.locationHashSupport&&h?a=u(h):b.firstSlideToLoad!=1?a=b.firstSlideToLoad:a=1,p(a-1),b.autoPlay&&o()}var a,c,d,e,f,g,h,i,j,k,l,m;c=$(this),d=c.children(),k=d.length,e=$('<div class="content-player-slides-wrapper"><div /></div>'),h=location.hash,a=b.firstSlideToLoad,f=c.width(),g=f*k,n(),slideshowCount++})}